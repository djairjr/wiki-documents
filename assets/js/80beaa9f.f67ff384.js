"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8618],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var i=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var p=i.createContext({}),l=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=l(e.components);return i.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},k=i.forwardRef((function(e,t){var n=e.components,s=e.mdxType,o=e.originalType,p=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),m=l(n),k=s,g=m["".concat(p,".").concat(k)]||m[k]||d[k]||o;return n?i.createElement(g,a(a({ref:t},c),{},{components:n})):i.createElement(g,a({ref:t},c))}));function g(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=n.length,a=new Array(o);a[0]=k;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[m]="string"==typeof e?e:s,a[1]=r;for(var l=2;l<o;l++)a[l]=n[l];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}k.displayName="MDXCreateElement"},94679:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=n(87462),s=(n(67294),n(3905));const o={description:"Home Assistant Intergration for SenseCAP LoRaWAN Sensors",title:"SenseCAP For HomeAssistant",keywords:["SenseCAP M2 Multi-Platform","Home Assistant","LoRaWAN Sensors"],last_update:{date:"10/19/2023",author:"JoJang"}},a="Automatic intergrate  all your SenseCAP Sensors to Home Assistant",r={unversionedId:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant",id:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant",title:"SenseCAP For HomeAssistant",description:"Home Assistant Intergration for SenseCAP LoRaWAN Sensors",source:"@site/docs/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant.md",sourceDirName:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform",slug:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant",permalink:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Home_Assistant.md",tags:[],version:"current",lastUpdatedBy:"JoJang",lastUpdatedAt:1697673600,formattedLastUpdatedAt:"Oct 19, 2023",frontMatter:{description:"Home Assistant Intergration for SenseCAP LoRaWAN Sensors",title:"SenseCAP For HomeAssistant",keywords:["SenseCAP M2 Multi-Platform","Home Assistant","LoRaWAN Sensors"],last_update:{date:"10/19/2023",author:"JoJang"}},sidebar:"ProductSidebar",previous:{title:"Quick Start",permalink:"/quick_start_with_M2_MP"},next:{title:"Connecting to AWS IoT",permalink:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-AWS-IoT"}},p={},l=[{value:"1. SenseCAP M2 Multi-Platform Configuration",id:"1-sensecap-m2-multi-platform-configuration",level:2},{value:"1.1 LoRa Network Configuration",id:"11-lora-network-configuration",level:3},{value:"1.2 ChirpStack Configuration",id:"12-chirpstack-configuration",level:3},{value:"2. Home Assistant Configuration",id:"2-home-assistant-configuration",level:2},{value:"2.1 Install",id:"21-install",level:3},{value:"2.2 Configuration",id:"22-configuration",level:3}],c={toc:l};function m(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"automatic-intergrate--all-your-sensecap-sensors-to-home-assistant"},"Automatic intergrate  all your SenseCAP Sensors to Home Assistant"),(0,s.kt)("p",{style:{textAlign:"center"}},(0,s.kt)("img",{src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/overview.jpg",alt:"pir",width:800,height:"auto"})),(0,s.kt)("h2",{id:"1-sensecap-m2-multi-platform-configuration"},"1. SenseCAP M2 Multi-Platform Configuration"),(0,s.kt)("h3",{id:"11-lora-network-configuration"},"1.1 LoRa Network Configuration"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 1.")," Click ",(0,s.kt)("strong",{parentName:"p"},"LoRa")," and choose ",(0,s.kt)("strong",{parentName:"p"},"LoRa Network")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/lora_network.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 2.")," Choose Local Network Server mode and fill your MQTT host information ",(0,s.kt)("strong",{parentName:"p"},"(Include your host, username, password and port).")," Then Click ",(0,s.kt)("strong",{parentName:"p"},"Save&&Apply")," "),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/lns.png"})),(0,s.kt)("p",null,"At this point we have finished the server mode setup, and we wiil configure the ChirpStack later."),(0,s.kt)("h3",{id:"12-chirpstack-configuration"},"1.2 ChirpStack Configuration"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 1.")," Open the ChirpStack configuration page, then ",(0,s.kt)("strong",{parentName:"p"},"Click Device profiles")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chripstack_profiles.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 2.")," Click ",(0,s.kt)("strong",{parentName:"p"},"Add device profile")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chripstack_profiles_2.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 3.")," First, fill in the device profile according to your SenseCAP configuration: ",(0,s.kt)("strong",{parentName:"p"},"Name, Region, MAC version"),", and ",(0,s.kt)("strong",{parentName:"p"},"Regional parameters revision"),", in which the ",(0,s.kt)("strong",{parentName:"p"},"Expected uplink interval")," needs to be changed to ",(0,s.kt)("strong",{parentName:"p"},"120"),", and this one can be adjusted according to your own requirements. In the second step, we Click the ",(0,s.kt)("strong",{parentName:"p"},"Codec")," at the top"),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chripstack_general.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 4.")," In this step, we need to choose the decoder according to our Sensor model, the code can be found ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP-Decoder.git"},"Here"),". We need to select the code in the ",(0,s.kt)("strong",{parentName:"p"},"TTN")," folder as our decoder."),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_decoder.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 5.")," Next step, we are going to add devices. Click ",(0,s.kt)("strong",{parentName:"p"},"Applications")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_applications.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 6.")," Click ",(0,s.kt)("strong",{parentName:"p"},"Add applications")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_application_2.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 7.")," Fill the application information and Click ",(0,s.kt)("strong",{parentName:"p"},"Submit")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_application_3.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 8.")," Use the ",(0,s.kt)("strong",{parentName:"p"},"SenseCAP Mate APP")," to configure Sensor, Set the ",(0,s.kt)("strong",{parentName:"p"},"Platform")," to ",(0,s.kt)("strong",{parentName:"p"},"Other Platform")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/SenseCAP_Mate.jpg"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 9.")," Click ",(0,s.kt)("strong",{parentName:"p"},"Add device")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_adddevice.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 10.")," Fill your device information and Click ",(0,s.kt)("strong",{parentName:"p"},"Submit")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_adddevice_2.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 11.")," Click the ",(0,s.kt)("strong",{parentName:"p"},"DevEUI")," of your devices to turn the page"),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_adddevice_3.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 12.")," Click ",(0,s.kt)("strong",{parentName:"p"},"OTAA keys")," and enter your ",(0,s.kt)("strong",{parentName:"p"},"Application key")," of the SenseCAP Sensor. Then Click ",(0,s.kt)("strong",{parentName:"p"},"Submit")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_appkey.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 13.")," Activate your SenseCAP Sensor and wait for it to automatically connect to LoRaWAN. Then you can see the data uploaded by the sensor in the ",(0,s.kt)("strong",{parentName:"p"},"Events")," and ",(0,s.kt)("strong",{parentName:"p"},"LoRaWAN frames")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_data.png"})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Step 14.")," At this point, we have completed all configurations of the M2 gateway."),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/chirpstack_updata.png"})),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"When adding a device to the M2 gateway for the ",(0,s.kt)("strong",{parentName:"p"},"first time"),", wait at least ",(0,s.kt)("strong",{parentName:"p"},"2-5")," minutes until the data reported by ",(0,s.kt)("strong",{parentName:"p"},"up")," can be seen in ",(0,s.kt)("strong",{parentName:"p"},"Events"),". Then the device addition initialization is complete. Then we can configure the Home Assistant plug-in.")),(0,s.kt)("h2",{id:"2-home-assistant-configuration"},"2. Home Assistant Configuration"),(0,s.kt)("h3",{id:"21-install"},"2.1 Install"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"1.HACS")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"First installation"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"1.HACS > Integrations >")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"2.Click on top right corner > Custom repositories \uff1a "),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre"},"  Repository: https://github.com/Seeed-Solution/home-assistant-SenseCAP.git\n  Category: Intergration\n")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/custom_repositories_2.png"}))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"3.Click ADD")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"4.HACS > Integrations > \u2795 EXPLORE & DOWNLOAD REPOSITORIES > Seeed Studio-SenseCAP > DOWNLOAD THIS REPOSITORY"))),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/custom_repositories_3.png"})))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Update component",(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"HACS > Integrations > ",(0,s.kt)("a",{parentName:"p",href:"https://my.home-assistant.io/redirect/hacs_repository/?owner=Seeed-Solution&repository=https%3A%2F%2Fgithub.com%2FSeeed-Solution%2Fhome-assistant-SenseCAP.git"},(0,s.kt)("inlineCode",{parentName:"a"},"Seeed Studio-SenseCAP"))," > UPDATE / Redownload")))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"2.Install via SSH & Web Terminal add-on")),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Open SSH Terminal and enter the following command:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"cd ~/config/custom_components && git clone https://github.com/Seeed-Solution/home-assistant-SenseCAP.git && cd home-assistant-SenseCAP/custom_components && mv sensecap ../../ && cd ../../ && rm -r home-assistant-SenseCAP\n")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/Install.jpg"})),(0,s.kt)("ol",{start:2},(0,s.kt)("li",{parentName:"ol"},"Restart HA core"),(0,s.kt)("li",{parentName:"ol"},"Add Integration",(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/add_intergration.png"})))),(0,s.kt)("h3",{id:"22-configuration"},"2.2 Configuration"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Enter your MQTT information and Click ",(0,s.kt)("strong",{parentName:"p"},"SUBMIT")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_1.png"}))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Waiting for few minutes (",(0,s.kt)("strong",{parentName:"p"},"The Uplink time depends on your setting in M2 Chirpstack and SenseCAP Mate APP"),"), and Click ",(0,s.kt)("strong",{parentName:"p"},"Notifications")," in the left sidebar. Then we can see the SenseCAP Sensors have been automatically added to HA. Click ",(0,s.kt)("strong",{parentName:"p"},"Check it out")," and turn to the Integration"),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_2.png"}))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Click on one of the devices and we can see that all of the entities have been automatically created and added to the device. Click ",(0,s.kt)("strong",{parentName:"p"},"ADD TO DASHBOARD")," so as to add all the entites of entire device directly to the dashboard through the form of cards"))),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_3.png"})),(0,s.kt)("ol",{start:4},(0,s.kt)("li",{parentName:"ol"},"Go to ",(0,s.kt)("strong",{parentName:"li"},"Overview")," and we can find the card we just added")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_4.png"})),(0,s.kt)("ol",{start:5},(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Edit dashboard"))),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_5.png"})),(0,s.kt)("ol",{start:6},(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"EDIT")," to edit")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_6.png"})),(0,s.kt)("ol",{start:7},(0,s.kt)("li",{parentName:"ol"},"We can add a header Picture to decorate the card")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_7.png"})),(0,s.kt)("ol",{start:8},(0,s.kt)("li",{parentName:"ol"},"Replace the url to yours in order to display your favorite picture")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_8.png"})),(0,s.kt)("ol",{start:9},(0,s.kt)("li",{parentName:"ol"},"Choose the entity to modify")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_9.png"})),(0,s.kt)("ol",{start:10},(0,s.kt)("li",{parentName:"ol"},"Change the icon to one that is similar to the type of sensor entity")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_10.png"})),(0,s.kt)("ol",{start:11},(0,s.kt)("li",{parentName:"ol"},"We have now completed the entire plugin configuration process here. Subsequently, you can perform custom optimizations according to your own requirements")),(0,s.kt)("div",{align:"center"},(0,s.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/IMAGES/SenseCAP/M2_homeassistant/config_11.png"})),(0,s.kt)("ol",{start:12},(0,s.kt)("li",{parentName:"ol"},'Here are the visual representations of the effects on the "Overview" page after adding various models of SenseCAP sensors.')),(0,s.kt)("p",null,"The aforementioned constitutes the complete step-by-step tutorial for integrating SenseCAP into the Home Assistant platform. Home Assistant has the capability to seamlessly integrate different types of devices from various platforms into a single ecosystem, facilitating cross-platform interoperability. This holds profound significance for the comprehensiveness of the smart home ecosystem. Presently, Seeed has also become a part of the extensive Home Assistant community, enabling the integration of our SenseCAP devices into the platform. We believe that this endeavor will contribute to the further strengthening and growth of the Internet of Things ecosystem !"))}m.isMDXComponent=!0}}]);