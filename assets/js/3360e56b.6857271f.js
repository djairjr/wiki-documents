"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[34962],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),p=u(n),m=i,f=p["".concat(l,".").concat(m)]||p[m]||c[m]||o;return n?r.createElement(f,s(s({ref:t},d),{},{components:n})):r.createElement(f,s({ref:t},d))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=m;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a[p]="string"==typeof e?e:i,s[1]=a;for(var u=2;u<o;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},77836:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var r=n(87462),i=(n(67294),n(3905));const o={title:"Grove - Wio-E5 P2P Example",nointro:null,keywords:["docs","docusaurus"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Grove_Wio_E5_P2P",last_update:{date:"08/28/2023",author:"Matthew"}},s=void 0,a={unversionedId:"Sensor/Grove/Grove_Sensors_Network/LoRa/Grove_Wio_E5_P2P",id:"Sensor/Grove/Grove_Sensors_Network/LoRa/Grove_Wio_E5_P2P",title:"Grove - Wio-E5 P2P Example",description:"Grove - Wio-E5 P2P Example",source:"@site/docs/Sensor/Grove/Grove_Sensors_Network/LoRa/Grove_Wio_E5_P2P.md",sourceDirName:"Sensor/Grove/Grove_Sensors_Network/LoRa",slug:"/Grove_Wio_E5_P2P",permalink:"/Grove_Wio_E5_P2P",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/Grove/Grove_Sensors_Network/LoRa/Grove_Wio_E5_P2P.md",tags:[],version:"current",lastUpdatedBy:"Matthew",lastUpdatedAt:1693180800,formattedLastUpdatedAt:"Aug 28, 2023",frontMatter:{title:"Grove - Wio-E5 P2P Example",nointro:null,keywords:["docs","docusaurus"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Grove_Wio_E5_P2P",last_update:{date:"08/28/2023",author:"Matthew"}},sidebar:"ProductSidebar",previous:{title:"Grove - Wio-E5",permalink:"/Grove_LoRa_E5_New_Version"},next:{title:"Grove - Wio-E5 TTN Demo",permalink:"/Grove_Wio_E5_TTN_Demo"}},l={},u=[{value:"Grove - Wio-E5 P2P Example",id:"grove---wio-e5-p2p-example",level:2},{value:"Preparations",id:"preparations",level:3},{value:"Connecting hardware",id:"connecting-hardware",level:3},{value:"Download Library",id:"download-library",level:3},{value:"Download the example",id:"download-the-example",level:3},{value:"Review Results",id:"review-results",level:3},{value:"Resources",id:"resources",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:u};function p(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"grove---wio-e5-p2p-example"},"Grove - Wio-E5 P2P Example"),(0,i.kt)("p",null,"This is the example of how to build a Point-to-Point Transmission Application with Grove - Wio-E5 and Seeeduino XIAO."),(0,i.kt)("h3",{id:"preparations"},"Preparations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Grove - Wio E5 *2"),(0,i.kt)("li",{parentName:"ul"},"Seeeduino XIAO* 2"),(0,i.kt)("li",{parentName:"ul"},"Seeeduino XIAO Expansion board *2"),(0,i.kt)("li",{parentName:"ul"},"USB typc cable* 2")),(0,i.kt)("p",null,"If this is your first time using Seeeduino XIAO, please refer to Seeeduino XIAO's ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Seeeduino-XIAO/"},"wiki"),"."),(0,i.kt)("p",null,"If this is your first time using Arduino, Please put hand on ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Getting_Started_with_Arduino/"},"here")," to start your Arduino journey."),(0,i.kt)("h3",{id:"connecting-hardware"},"Connecting hardware"),(0,i.kt)("p",null,"We can connect the Wio-E5 module to the UART socket directly as the below picture shows."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://files.seeedstudio.com/products/113020091/P2P.png",alt:"point to point transmission with grove wio e5"})),(0,i.kt)("h3",{id:"download-library"},"Download Library"),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/olikraus/u8g2"},"u8g2")," library must be installed for this demo. Click to download the library and install it (",(0,i.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/How_to_install_Arduino_Library/"},"How to install an Arduino Library"),")."),(0,i.kt)("h3",{id:"download-the-example"},"Download the example"),(0,i.kt)("p",null,"Copy the code stick on the Aruino IDE then upload it.\nOne of them is used as a master, and the NODE_SLAVE macro definition in the code needs to be commented out, and the other is used as a slave, and the NODE_SLAVE macro definition in the code needs to be turned on."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'# include <Arduino.h>\n# include <U8x8lib.h>\n\n// #define NODE_SLAVE\n\nU8X8_SSD1306_128X64_NONAME_HW_I2C u8x8(/*reset=*/U8X8_PIN_NONE);\n// U8X8_SSD1306_128X64_NONAME_SW_I2C u8x8(/*clock=*/ SCL, /*data=*/ SDA, /*reset=*/ U8X8_PIN_NONE);   // OLEDs without Reset of the Display\n\nstatic char recv_buf[512];\nstatic bool is_exist = false;\n\nstatic int at_send_check_response(char *p_ack, int timeout_ms, char*p_cmd, ...)\n{\n    int ch = 0;\n    int index = 0;\n    int startMillis = 0;\n    va_list args;\n    memset(recv_buf, 0, sizeof(recv_buf));\n    va_start(args, p_cmd);\n    Serial1.printf(p_cmd, args);\n    Serial.printf(p_cmd, args);\n    va_end(args);\n    delay(200);\n    startMillis = millis();\n\n    if (p_ack == NULL)\n    {\n        return 0;\n    }\n\n    do\n    {\n        while (Serial1.available() > 0)\n        {\n            ch = Serial1.read();\n            recv_buf[index++] = ch;\n            Serial.print((char)ch);\n            delay(2);\n        }\n\n        if (strstr(recv_buf, p_ack) != NULL)\n        {\n            return 1;\n        }\n\n    } while (millis() - startMillis < timeout_ms);\n    return 0;\n}\n\nstatic int recv_prase(void)\n{\n    char ch;\n    int index = 0;\n    memset(recv_buf, 0, sizeof(recv_buf));\n    while (Serial1.available() > 0)\n    {\n        ch = Serial1.read();\n        recv_buf[index++] = ch;\n        Serial.print((char)ch);\n        delay(2);\n    }\n\n    if (index)\n    {\n        char *p_start = NULL;\n        char data[32] = {\n            0,\n        };\n        int rssi = 0;\n        int snr = 0;\n\n        p_start = strstr(recv_buf, "+TEST: RX \\"5345454544");\n        if (p_start)\n        {\n            p_start = strstr(recv_buf, "5345454544");\n            if (p_start && (1 == sscanf(p_start, "5345454544%s", data)))\n            {\n                data[4] = 0;\n                u8x8.setCursor(0, 4);\n                u8x8.print("               ");\n                u8x8.setCursor(2, 4);\n                u8x8.print("RX: 0x");\n                u8x8.print(data);\n                Serial.print(data);\n                Serial.print("\\r\\n");\n            }\n\n            p_start = strstr(recv_buf, "RSSI:");\n            if (p_start && (1 == sscanf(p_start, "RSSI:%d,", &rssi)))\n            {\n                u8x8.setCursor(0, 6);\n                u8x8.print("                ");\n                u8x8.setCursor(2, 6);\n                u8x8.print("rssi:");\n                u8x8.print(rssi);\n            }\n            p_start = strstr(recv_buf, "SNR:");\n            if (p_start && (1 == sscanf(p_start, "SNR:%d", &snr)))\n            {\n                u8x8.setCursor(0, 7);\n                u8x8.print("                ");\n                u8x8.setCursor(2, 7);\n                u8x8.print("snr :");\n                u8x8.print(snr);\n            }\n            return 1;\n        }\n    }\n    return 0;\n}\n\nstatic int node_recv(uint32_t timeout_ms)\n{\n    at_send_check_response("+TEST: RXLRPKT", 1000, "AT+TEST=RXLRPKT\\r\\n");\n    int startMillis = millis();\n    do\n    {\n        if (recv_prase())\n        {\n            return 1;\n        }\n    } while (millis() - startMillis < timeout_ms);\n    return 0;\n}\n\nstatic int node_send(void)\n{\n    static uint16_t count = 0;\n    int ret = 0;\n    char data[32];\n    char cmd[128];\n\n    memset(data, 0, sizeof(data));\n    sprintf(data, "%04X", count);\n    sprintf(cmd, "AT+TEST=TXLRPKT,\\"5345454544%s\\"\\r\\n", data);\n\n    u8x8.setCursor(0, 3);\n    u8x8.print("                ");\n    u8x8.setCursor(2, 3);\n    u8x8.print("TX: 0x");\n    u8x8.print(data);\n\n    ret = at_send_check_response("TX DONE", 2000, cmd);\n    if (ret == 1)\n    {\n\n        count++;\n        Serial.print("Sent successfully!\\r\\n");\n    }\n    else\n    {\n        Serial.print("Send failed!\\r\\n");\n    }\n    return ret;\n}\n\nstatic void node_recv_then_send(uint32_t timeout)\n{\n    int ret = 0;\n    ret = node_recv(timeout);\n    delay(100);\n    if (!ret)\n    {\n        Serial.print("\\r\\n");\n        return;\n    }\n    node_send();\n    Serial.print("\\r\\n");\n}\n\nstatic void node_send_then_recv(uint32_t timeout)\n{\n    int ret = 0;\n    ret = node_send();\n    if (!ret)\n    {\n        Serial.print("\\r\\n");\n        return;\n    }\n    if (!node_recv(timeout))\n    {\n        Serial.print("recv timeout!\\r\\n");\n    }\n    Serial.print("\\r\\n");\n}\n\nvoid setup(void)\n{\n\n    u8x8.begin();\n    u8x8.setFlipMode(1);\n    u8x8.setFont(u8x8_font_chroma48medium8_r);\n\n    Serial.begin(115200);\n    // while (!Serial);\n\n    Serial1.begin(9600);\n    Serial.print("ping pong communication!\\r\\n");\n    u8x8.setCursor(0, 0);\n\n    if (at_send_check_response("+AT: OK", 100, "AT\\r\\n"))\n    {\n        is_exist = true;\n        at_send_check_response("+MODE: TEST", 1000, "AT+MODE=TEST\\r\\n");\n        at_send_check_response("+TEST: RFCFG", 1000, "AT+TEST=RFCFG,866,SF12,125,12,15,14,ON,OFF,OFF\\r\\n");\n        delay(200);\n# ifdef NODE_SLAVE\n        u8x8.setCursor(5, 0);\n        u8x8.print("slave");\n# else\n        u8x8.setCursor(5, 0);\n        u8x8.print("master");\n# endif\n    }\n    else\n    {\n        is_exist = false;\n        Serial.print("No E5 module found.\\r\\n");\n        u8x8.setCursor(0, 1);\n        u8x8.print("unfound E5 !");\n    }\n}\n\nvoid loop(void)\n{\n    if (is_exist)\n    {\n# ifdef NODE_SLAVE\n        node_recv_then_send(2000);\n# else\n        node_send_then_recv(2000);\n        delay(3000);\n# endif\n    }\n}\n')),(0,i.kt)("h3",{id:"review-results"},"Review Results"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://github.com/seeed-lora/Grove-LoRa-E5-P2P-Example/blob/master/Doc/result.jpg?raw=true",alt:null})),(0,i.kt)("h2",{id:"resources"},"Resources"),(0,i.kt)("p",null,"Datasheet:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"http://files.seeedstudio.com/products/113020091/Grove%20-%20LoRa%20-E5%20v1.0.brd"},"Grove Wio-E5 v1.0.brd"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/113020091/Grove%20-%20LoRa%20-E5%20v1.0.pdf"},"Grove Wio-E5 v1.0.pdf"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"http://files.seeedstudio.com/products/113020091/Grove%20-%20LoRa%20-E5%20v1.0.sch"},"Grove Wio-E5 v1.0.sch"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/LoRa-E5%20module%20datasheet_V1.0.pdf"},"Wio-E5 datasheet and specifications"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/LoRa-E5%20AT%20Command%20Specification_V1.0%20.pdf"},"Wio-E5 AT Command Specification"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/STM32WLE5JC%20Datasheet.pdf"},"STM32WLE5JC Datasheet")))),(0,i.kt)("p",null,"Certifications:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/LoRa-E5-HF%20Certification%20CE-VOC-RED.pdf"},"Wio-E5-HF Certification CE-VOC-RED"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/LoRa-E5-HF%20FCC%20Certification%20-DSS.pdf"},"Wio-E5-HF FCC Certification -DSS"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://files.seeedstudio.com/products/317990687/res/LoRa-E5-HF%20FCC%20Certification%20-DTS.pdf"},"Wio-E5-HF FCC Certification -DTS")))),(0,i.kt)("p",null,"Relevant SDK:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",null,(0,i.kt)("a",{href:"https://my.st.com/content/my_st_com/en/products/embedded-software/mcu-mpu-embedded-software/stm32-embedded-software/stm32cube-mcu-mpu-packages/stm32cubewl.license=1608693595598.product=STM32CubeWL.version=1.0.0.html#overview",target:"_blank"},"STM32Cube MCU Package for STM32WL series")))),(0,i.kt)("div",{id:"gtx-trans",style:{position:"absolute",left:"-36px",top:"48.875px"}},(0,i.kt)("div",{className:"gtx-trans-icon"})),(0,i.kt)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,i.kt)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,i.kt)("div",{class:"button_tech_support_container"},(0,i.kt)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,i.kt)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,i.kt)("div",{class:"button_tech_support_container"},(0,i.kt)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,i.kt)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}p.isMDXComponent=!0}}]);