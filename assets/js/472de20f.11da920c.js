"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[18452],{3905:(e,t,i)=>{i.d(t,{Zo:()=>c,kt:()=>m});var n=i(67294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var l=n.createContext({}),d=function(e){var t=n.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):r(r({},t),e)),i},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(i),h=a,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||o;return i?n.createElement(m,r(r({ref:t},c),{},{components:i})):n.createElement(m,r({ref:t},c))}));function m(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=i.length,r=new Array(o);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,r[1]=s;for(var d=2;d<o;d++)r[d]=i[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,i)}h.displayName="MDXCreateElement"},93293:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=i(87462),a=(i(67294),i(3905));const o={description:"SenseCAP Indicator x Matter Application Development",title:"Matter X SenseCAP Indicator",keywords:["SenseCAP Indicator","Matter","ESP32S3"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_Indicator_Application_Matter",last_update:{date:"8/28/2023",author:"Tim"}},r="SenseCAP Indicator x Matter Application Development",s={unversionedId:"Sensor/SenseCAP/SenseCAP_Indicator/Application/Matter1",id:"Sensor/SenseCAP/SenseCAP_Indicator/Application/Matter1",title:"Matter X SenseCAP Indicator",description:"SenseCAP Indicator x Matter Application Development",source:"@site/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/Matter1.md",sourceDirName:"Sensor/SenseCAP/SenseCAP_Indicator/Application",slug:"/SenseCAP_Indicator_Application_Matter",permalink:"/SenseCAP_Indicator_Application_Matter",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/Matter1.md",tags:[],version:"current",lastUpdatedBy:"Tim",lastUpdatedAt:1693180800,formattedLastUpdatedAt:"Aug 28, 2023",frontMatter:{description:"SenseCAP Indicator x Matter Application Development",title:"Matter X SenseCAP Indicator",keywords:["SenseCAP Indicator","Matter","ESP32S3"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_Indicator_Application_Matter",last_update:{date:"8/28/2023",author:"Tim"}}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install ESP IDF and ESP Matter",id:"install_sdks",level:2},{value:"Configuring your environment and building",id:"configure_and_build",level:2},{value:"Using Visual Studio Code to configure and build",id:"using-visual-studio-code-to-configure-and-build",level:3},{value:"Using the CLI to configure and build",id:"using-the-cli-to-configure-and-build",level:3},{value:"Using the application",id:"using_application",level:2},{value:"Standard functionality",id:"standard-functionality",level:3},{value:"Matter Home Assistant Dashboard",id:"matter-home-assistant-dashboard",level:3},{value:"Configuring the Home Assistant UI further",id:"going_beyond",level:2},{value:"Resources",id:"resources",level:2},{value:"Tech Support",id:"tech-support",level:2}],c={toc:d};function p(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sensecap-indicator-x-matter-application-development"},"SenseCAP Indicator x Matter Application Development"),(0,a.kt)("iframe",{class:"youtube-video",src:"https://www.youtube.com/embed/LCIWqwmCZ54",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"This is a demo of how to use the ",(0,a.kt)("a",{parentName:"p",href:"https://project-chip.github.io/connectedhomeip-doc/index.html"},"Matter SDK")," to build enriched applications for your SenseCAP Indicator."),(0,a.kt)("p",null,"The SenseCAP Indicator has a touchscreen which makes it capable of acting as a powerful home automation interface. Matter makes the process easier than ever as it takes away a lot of the complicated aspects of configuration. With the help of Matter's SDK one can quickly scan a QR code and configure their device onto their home network."),(0,a.kt)("p",null,"For this article we'll go through the steps involved to get your device up and running with the demo."),(0,a.kt)("br",null),(0,a.kt)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,a.kt)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/SenseCAP-Indicator-D1-p-5643.html"},(0,a.kt)("strong",null,(0,a.kt)("span",null,(0,a.kt)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))),(0,a.kt)("br",null),(0,a.kt)("p",null,"The Matter SDK provides a standard set of devices and allows access to their data and the uploading of their state to the controller. ESP-Matter was developed by Espressif as an official Matter development framework for ESP32 series SoCs."),(0,a.kt)("p",null,"To get your SenseCAP Indicator working with Matter, you need to follow a few main steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"#install_sdks"},"Install esp-idf and esp-matter")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"#configure_and_build"},"Configuring your environment and building")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"#using_application"},"Using the application")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"#going_beyond"},"Configuring the Home Assistant UI further"))),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"Before we begin, make sure you have read the ",(0,a.kt)("a",{parentName:"p",href:"/Sensor/SenseCAP/SenseCAP_Indicator/Get_started_with_SenseCAP_Indicator"},"User Guide")," of the SenseCAP Indicator Board to familiarize yourself with its software and hardware information."),(0,a.kt)("h2",{id:"install_sdks"},"Install ESP IDF and ESP Matter"),(0,a.kt)("p",null,"You'll want to follow the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.espressif.com/projects/esp-matter/en/latest/esp32/developing.html#getting-the-repositories"},"instructions provided by the ESP-Matter SDK documentation")," and install version 5.0.1 of ESP-IDF and the release version 1.1 from ESP-Matter."),(0,a.kt)("p",null,"After those version has been installed please install the patch provided by Seeed Studio ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/tree/main/tools/patch"},"apply the provided patch"),"."),(0,a.kt)("h2",{id:"configure_and_build"},"Configuring your environment and building"),(0,a.kt)("h3",{id:"using-visual-studio-code-to-configure-and-build"},"Using Visual Studio Code to configure and build"),(0,a.kt)("iframe",{class:"youtube-video",src:"https://www.youtube.com/embed/eZPII0yaDa4",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("h3",{id:"using-the-cli-to-configure-and-build"},"Using the CLI to configure and build"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"~/esp/esp-idf/install.sh\n~/.espressif/esp-matter/install.sh\n\n. ~/esp/esp-idf/export.sh\n. ~/.espressif/esp-matter/export.sh\n\ncd examples/indicator_matter\nidf.py set-target esp32s3\nidf.py fullclean\nidf.py erase-flash\nidf.py build flash monitor\n")),(0,a.kt)("h2",{id:"using_application"},"Using the application"),(0,a.kt)("p",null,"Once the firmware has been flashed the screen starts with just the QR code. Open your home automation's phone application and enter into the device provisioning flow (varies depending upon manufacturer)."),(0,a.kt)("p",null,"In the following example you can see my use of the Home Assistant mobile application to connect to my Home Assistant Yellow running the Matter Beta service. "),(0,a.kt)("div",{align:"center"},(0,a.kt)("img",{width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-1.jpg"})),(0,a.kt)("p",null,"Upon scanning the device my phone immediately begins the process of provisioning. The provisioning process handled securely passing your credentials to the device allowing it to connect to the home automation controller device over wifi. In this way you never need to actually write the wifi credentials anywhere."),(0,a.kt)("p",null,"After provisioning the device will begin reporting its temperature and humidity to the home assistant controller at intervals of 10 seconds."),(0,a.kt)("h3",{id:"standard-functionality"},"Standard functionality"),(0,a.kt)("iframe",{class:"youtube-video",src:"https://www.youtube.com/embed/mBhrYeyQQeg",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("p",null,"The Indicator Matter application allows for browsing sensor data in a similar way to the standard firmware. Upon loading the device shows the clock screen which is configured based upon your location to give you an accurate time. The screen has events to detect being slid to the right and left to cycle through the time, sensor display, and settings screen."),(0,a.kt)("div",{class:"table-center"},(0,a.kt)("table",{align:"center"},(0,a.kt)("tr",null,(0,a.kt)("td",null,(0,a.kt)("div",{style:{textAlign:"center"}},(0,a.kt)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-2.jpg",style:{width:480,height:"auto"}}))),(0,a.kt)("td",null,(0,a.kt)("div",{style:{textAlign:"center"}},(0,a.kt)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-3.jpg",style:{width:480,height:"auto"}})))),(0,a.kt)("tr",null,(0,a.kt)("td",null,(0,a.kt)("div",{style:{textAlign:"center"}},(0,a.kt)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-4.jpg",style:{width:480,height:"auto"}}))),(0,a.kt)("td",null,(0,a.kt)("div",{style:{textAlign:"center"}},(0,a.kt)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-5.jpg",style:{width:480,height:"auto"}})))))),(0,a.kt)("p",null,"Clicking a sensor further shows additional information about the state of that sensor and the history can be viewed in this way. "),(0,a.kt)("p",null,"The settings screen allows configuration of several elements of the device's function. A 12 or 24 hour clock can be configured, the timezone is overridable, and the display brightness is adjustable."),(0,a.kt)("h3",{id:"matter-home-assistant-dashboard"},"Matter Home Assistant Dashboard"),(0,a.kt)("p",null,"To access the Matter Home Assistant Dashboard swipe down from the main clock screen. This dashboard has multiple different components which are associated with demo devices on the Matter side. During the provisioning process these devices have endpoints created which can be used for accessing common features such as dimming a light or turning it off completely."),(0,a.kt)("div",{align:"center"},(0,a.kt)("img",{width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-6.jpg"})),(0,a.kt)("p",null,"In the case of this demo two dimmable lights were setup along with a door lock. You can see as you click the buttons the home assistant side is also updated to reflect these changes. The sliders can be moved to set the brightness of the light."),(0,a.kt)("p",null,"From the home assistant side the devices can be enabled and disabled or modified as needed and the SenseCAP Indicator also is updated to reflect it. In this way you can have additional automations disable or enable functionality on your Indicator device and have the screen reflect their state in realtime."),(0,a.kt)("p",null,"The virtual dashboard and automation capabilities of the home controller in use allow for various interesting combinations. With the SenseCAP Indicator you can build dashboards of your own imagination to control devices across your home environment."),(0,a.kt)("div",{align:"center"},(0,a.kt)("img",{width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/indicator-matter-7.jpg"})),(0,a.kt)("h2",{id:"going_beyond"},"Configuring the Home Assistant UI further"),(0,a.kt)("p",null,"The UI itself is built using ",(0,a.kt)("a",{parentName:"p",href:"https://lvgl.io/"},"LVGL"),". For more detailed information about configuring LVGL see the ",(0,a.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/using_lvgl_and_tft_on_round_display/"},"following article"),"."),(0,a.kt)("p",null,"The UI for the dashboard is composed of LGVL components with events setup for callbacks such that their data is persisted both to local storage and to the matter endpoint. The virtual dashboard controller (",(0,a.kt)("inlineCode",{parentName:"p"},"indicator_virtual_dashboard_controller.c"),") handles updating the form and posting associated events for other consumers when the underlying data is changed."),(0,a.kt)("p",null,"For the initial example three devices have been setup and the underlying logic in the matter model handles responding to events from the view and persisting the data on to the matter endpoints or updating the state of the UI."),(0,a.kt)("p",null,"In general the following considerations must be made when updating the UI and persisting to Matter:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"During the initialization process the method ",(0,a.kt)("inlineCode",{parentName:"li"},"indicator_matter_setup()")," of the ",(0,a.kt)("inlineCode",{parentName:"li"},"indicator_matter.cpp")," model sets up any associated devices for use with Matter. In addition a callback is setup for view events such that the matter endpoints are updated on change."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"indicator_virtual_dashboard.c")," model listens to view events associated with the virtual dashboard and persists the data to storage for retreival on initialization."),(0,a.kt)("li",{parentName:"ul"},"The matter logic subscribes to the events around modified matter data (whether remotely or locally)"),(0,a.kt)("li",{parentName:"ul"},"The virtual dashboard controller handles updating the state of the form as needed in response to events sent via the ",(0,a.kt)("inlineCode",{parentName:"li"},"indicator_matter.cpp")," Matter callbacks on changes from Matter controller.")),(0,a.kt)("h2",{id:"resources"},"Resources"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Demo SDK"),": The Demo SDK for the SenseCAP Indicator is available on ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32"},"GitHub"),"."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"User Guide"),": The User Guide provides detailed information about the software and hardware of the SenseCAP Indicator Board. You can read it ",(0,a.kt)("a",{parentName:"li",href:"/Sensor/SenseCAP/SenseCAP_Indicator/Get_started_with_SenseCAP_Indicator"},"here"),"."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Getting Started Guide for ESP-IDF"),": This guide provides full steps to configure and use ESP-IDF to build projects. You can access it ",(0,a.kt)("a",{parentName:"li",href:"https://docs.espressif.com/projects/esp-idf/en/latest/get-started/index.html"},"here"),"."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Matter Installation Guide"),": If you're new to ESP-Matter, this guide will help you get it installed and set up. You can find it ",(0,a.kt)("a",{parentName:"li",href:"https://docs.espressif.com/projects/esp-matter/en/latest/esp32/developing.html"},"here"),".")),(0,a.kt)("h2",{id:"tech-support"},"Tech Support"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Need help with your SenseCAP Indicator? We're here to assist you!")),(0,a.kt)("p",null,"If you encounter any issues or have any questions while following this tutorial, please feel free to reach out to our tech support. We are always here to help!"),(0,a.kt)("p",null,"Visit our ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/sensecap"},"Seeed Official Discord Channel")," to ask your questions or the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/discussions"},"GitHub discussions")," to share all you want!"))}p.isMDXComponent=!0}}]);